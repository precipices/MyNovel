<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>小说辅助器</title>
<!--  导入Bootstrap和JQuery -->
<link href="css/lib/bootstrap.min.css" rel="stylesheet" />
<script src="js/lib/jquery.min.js"></script>
<script src="js/lib/bootstrap.bundle.min.js"></script>
<!-- <script src="js/lib/bootstrap.min.js"></script> -->
<!-- 导入wangEditor-->
<script type="text/javascript" src="/js/lib/wangEditor.min.js"></script>
<!-- 自定义的css样式 -->
<link href="css/mycommons.css?v=0.7" rel="stylesheet">
<!-- 自定义的js脚本 -->
<!-- 工具层 -->
<script src="js/util/MyUtil.js?v=0.1"></script>
<!-- 全局层 -->
<script src="js/global/IndexUtil.js?v=0.1"></script>
<script src="js/global/globalVar.js?v=0.1"></script>
<script src="js/global/changeDiv.js?v=0.1"></script>
<!-- 数据获取层 -->
<script src="js/refresh/BookManageRefresh.js?v=0.3"></script>
<script src="js/refresh/refresh.js?v=0.1"></script>
<!-- 监听器层 -->
<script src="js/listener/myListener.js?v=0.4"></script>
<script src="js/listener/onclick/BookManageOnClick.js?v=0.1"></script>
<script src="js/listener/onclick.js?v=0.4"></script>
<!-- 初始化层 -->
<script src="js/afterLoad.js?v=0.1"></script>
<!-- 测试用css -->
<style type="text/css">

</style>
<!-- 测试用script -->
<script type="text/javascript">
	$(function() {
		$("#book_list_btn").click();
// 		$("#update_book_form_change_btn").click();
		
	});
</script>
</head>
<body>
<!-- 	全局标题div -->
	<div id="title_div" class="title bg2">
<!-- 	全局标题 -->
		<h1 id="title">小说辅助器</h1>
	</div>
<!-- 	全局容器div -->
	<div id="container_div" class="container bg3">
<!-- 	菜单栏ul -->
		<ul id="menu_bar_ul" class="nav nav-tabs">
			<li class="nav-item dropdown">
				<a class="nav-link dropdown-toggle active" data-toggle="dropdown">生成器</a>
				<div class="dropdown-menu">
					<a class="dropdown-item" onclick="change($('#name_create_div'),this,'人名生成器');">人名生成器</a>
					<a class="dropdown-item" onclick="change($('#place_create_div'),this,'人名生成器');">地名生成器</a>
				</div>
			</li>
			<li class="nav-item dropdown">
				<a class="nav-link dropdown-toggle" data-toggle="dropdown">书籍管理器</a>
				<div class="dropdown-menu">
					<a id="book_list_btn" class="dropdown-item" onclick="change($('#book_list_content_div'),this);">书籍列表</a>
					<a class="dropdown-item" data-toggle="modal" data-target="#select_file_div">书籍导入</a>
				</div>
			
			</li>
			<li class="nav-item dropdown" style="display:none;">
				<a class="nav-link dropdown-toggle" data-toggle="dropdown">章节管理器</a>
				<div class="dropdown-menu">
					<a id=chapter_list_btn class="dropdown-item" onclick="change($('#chapter_list_div'),this);">章节列表</a>
				</div>
			</li>
			<li class="nav-item dropdown">
				<a class="nav-link dropdown-toggle" data-toggle="dropdown" >人物管理器</a>
				<div class="dropdown-menu">
					<a class="dropdown-item" onclick="change($('#people_manage_div'),this);">人物管理器</a>
					<a class="dropdown-item" onclick="change($('#people_relationship_div'),this);">人物关系图</a>
					<a class="dropdown-item" onclick="change($('#people_create_div'),this);">人物生成器</a>
			    </div>
			</li>
			<li class="nav-item dropdown">
				<a class="nav-link dropdown-toggle" data-toggle="dropdown">用户</a>
				<div class="dropdown-menu">
					<a class="dropdown-item" href="login.do">登录注册 </a>
					<a class="dropdown-item" onclick="change($('#my_info_div'),this);">我的资料 </a>
					<a class="dropdown-item" href="invalidate.do">注销 </a>
				</div>
			</li>
		</ul>
<!-- 		菜单栏下侧div容器 -->
		<div id="below_container_div" style="padding:10px;">
<!-- --------------------------------人名生成器--------------------------------------------- -->
			<div id="name_create_div" class="tab-item row">
				<div class="col-md-3">
					<div id="create-way-div1" class="form-group row">
						<label class="col-md-5" for="create-way1">生成风格：</label> <select
							id="create-way1" class="form-control col-md-7">
							<option value="0" selected>普通名字</option>
							<option value="1">玄幻风格</option>
						</select>
					</div>
					<div id="create-num-div1" class="form-group row">
						<label for="create-num1" class="control-label col-md-5">生成数量：
						</label>
						<div class="col-md-7">
							<input id="create-num1" class="form-control" type="text"
								value="100" />
						</div>
					</div>
				</div>
				<div class="col-md-2">
					<div id="xing-num-div" class="form-group row">
						<label class="col-md-6" for="xing-num">单双姓：</label> <select
							id="xing-num" class="form-control col-md-6">
							<option value="0">全部</option>
							<option value="1" selected>单姓</option>
							<option value="2">双姓</option>
						</select>
					</div>
					<div id="ming-num-div" class="form-group row">
						<label class="col-md-6 control-label" for="ming-num">单双名：
						</label> <select id="ming-num" class="form-control col-md-6"
							style="width: 100px">
							<option value="0">全部</option>
							<option value="1">单名</option>
							<option value="2">双名</option>
						</select>
					</div>
				</div>
				<div id="sex-div" class="col-md-3">
					<div class="form-group row">
						<label class="col-md-5" for="sex">性别：</label> <select id="sex"
							class="form-control col-md-7">
							<option value="0">全部</option>
							<option value="1">男</option>
							<option value="2">女</option>
						</select>
					</div>
				</div>
				<div class="col-md-2">
					<button type="button" id="create-btn1" class="btn btn-primary"
						data-toggle="tooltip" data-placement="top" title="点击生成人名">人名生成</button>
				</div>
				<div id="result-div1" class="col-md-12"></div>
			</div>

<!-- --------------------------------人物生成器--------------------------------------------- -->
			<div id="people_create_div" class="tab-item row">人物生成器</div>

<!-- --------------------------------地名生成器--------------------------------------------- -->
			<div id="place_create_div" class="tab-item row">
				<div class="col-md-3">
					<div id="create-way-div3" class="form-group row">
						<label class="col-md-5" for="create-way3">生成风格：</label> <select
							id="create-way3" class="form-control col-md-7">
							<option value="0" selected>玄幻风格地名</option>
						</select>
					</div>
					<div id="create-num-div3" class="form-group row">
						<label for="create-num3" class="control-label col-md-5">生成数量：
						</label>
						<div class="col-md-7">
							<input id="create-num3" class="form-control" type="text"
								value="100" />
						</div>
					</div>
				</div>
				<div class="col-md-2">
					<button type="button" id="create-btn3" class="btn btn-primary"
						data-toggle="tooltip" data-placement="top" title="点击生成地名">地名生成</button>
				</div>
				<div id="result-div3" class="col-md-12"></div>
			</div>

<!-- --------------------------------人物管理器--------------------------------------------- -->
			<div id="people_manage_div" class="tab-item row">
					<div class="list-group bg3 left-div">
					    <a class="list-group-item list-group-item-action bg3" onclick="">人物列表</a>
					    <a class="list-group-item list-group-item-action bg3" onclick="">新增人物</a>
					    <a class="list-group-item list-group-item-action bg3" onclick="">删除人物</a>
					    <a class="list-group-item list-group-item-action bg3" onclick="">查找人物</a>
					    <a class="list-group-item list-group-item-action bg3" onclick="">修改人物</a>
					</div>
					<div class="right-div">
						<table class="table table-striped table-bordered mytable"><tbody><tr><td>段建彰</td><td>靳惠菁</td><td>芦福</td><td>邬衣</td><td>苗晏</td><td>高琮</td><td>贾濡</td><td>赖宜君</td><td>莫础</td><td>魏思嘉</td></tr><tr><td>冉阡</td><td>魏克</td><td>荆际</td><td>许诗</td><td>吉怡儒</td><td>卢妗</td><td>戚禹</td><td>姜遥</td><td>晏婉茹</td><td>冼观</td></tr><tr><td>莫淑贞</td><td>糜宇轩</td><td>霍志豪</td><td>米玺</td><td>范莳</td><td>姚凯文</td><td>赵淑珍</td><td>舒龄</td><td>庞艾</td><td>柏佰</td></tr><tr><td>莫家源</td><td>欧明哲</td><td>卞屹</td><td>翟水</td><td>段明慧</td><td>苟彦廷</td><td>向伊</td><td>费锜</td><td>阎筑</td><td>曹山</td></tr><tr><td>解镁</td><td>项健豪</td><td>顾修</td><td>包建安</td><td>仇尊</td><td>丁礼</td><td>僧海</td><td>钟宣</td><td>宋镇</td><td>龚虔</td></tr><tr><td>陶锡</td><td>卢建华</td><td>纪怡玲</td><td>僧冠良</td><td>巩佳瑜</td><td>温猷</td><td>应炘</td><td>柴郁文</td><td>郜词</td><td>戴骐</td></tr><tr><td>莫田</td><td>秦闳</td><td>苗孟哲</td><td>莫足</td><td>薄泳</td><td>白筑</td><td>季娴</td><td>郁秋萍</td><td>徐慧珊</td><td>赵鐴</td></tr><tr><td>栾筑</td><td>隋法</td><td>边贸</td><td>常俊谚</td><td>钱锟</td><td>苟俞</td><td>植斯</td><td>沙益</td><td>万奕廷</td><td>畅明峰</td></tr><tr><td>辛林</td><td>迟俊嘉</td><td>卞政哲</td><td>苟怡蓉</td><td>程偲</td><td>位淑珍</td><td>乔柏安</td><td>鲍佩宜</td><td>彭庸</td><td>辛楙</td></tr><tr><td>苟光</td><td>孟宛臻</td><td>郜恺</td><td>石谋</td><td>楚尘</td><td>毛枚</td><td>申则</td><td>魏翰</td><td>黄俊宏</td><td>晋耀德</td></tr></tbody></table>
					</div>
			</div>

<!-- --------------------------------书籍列表--------------------------------------------- -->
			<!-- 书籍列表容器div,一级div -->
			<div id="book_list_content_div" class="tab-item row" >
<!-- 			书籍列表左侧容器div,二级div -->
				<div id="book_list_left_content_div" class="list-group bg3 left-div">
<!-- 					书籍列表导航按钮 -->
					    <a id="book_list_change_btn" class="list-group-item list-group-item-action bg3 active" onclick="changeRightWithActiveTab('book_list_rignt_div',this)">书籍列表</a>
<!-- 					新增/更新小说表单导航按钮 -->
					    <a id="update_book_form_change_btn" class="list-group-item list-group-item-action bg3" onclick="openCreateBookFrom(this)">新增书籍</a>
				</div>
<!-- 				书籍列表右侧容器div,二级div -->
				<div id="book_list_right_content_div" class="right-div">
<!-- 				新增/更新小说表单右侧div,三级div -->
					<div id="update_book_form_right_div" class="hidden" style="text-align:center">
<!-- 					新增/更新小说标题 -->
						<h1 id="update_book_title">新增小说</h1>
<!-- 						新增/更新小说表单 -->
						<form id="update_book_form" role="form"  action="updateBook.do"
							method="post">
							<input type="hidden" id="book_id_text" name="bookId" value="0"/>
							<div class="form-group">
								<input type="text" id="book_name_text" name="bookName" class="form-control" placeholder="小说名" />
							</div>
							<div class="form-group">
								<input type="text" id="book_type_text" name="bookType" class="form-control" placeholder="小说类型" />
							</div>
							<div class="form-group">
								<input type="text" id="book_tags_text" name="bookTags" class="form-control" placeholder="小说标签（逗号分隔）" />
							</div>
							<div class="form-group">
								<textarea placeholder="简介" id="book_intro_text" name="bookIntro" class="form-control"></textarea>
							</div>
<!-- 							新增/更新小说表单提交按钮 -->
							<div class="form-group">
								<input id="update_book_form_submit_btn" class="btn btn-primary" type="button" value="提交" onclick="createUpdateCheck()"/>
							</div>
						</form>
					</div>
<!-- 					书籍列表右侧div,三级div -->
					<div id="book_list_rignt_div">
<!-- 					书籍列表表格 -->
						<table id="book_list_table" class="table table-striped table-bordered mytable midFont">
<!-- 						书籍列表表格thead -->
						<thead id="book_list_table_thead">
							<tr>
								<td>书名</td>
								<td>小说类型</td>
								<td>小说标签</td>
								<td>简介</td>
								<td>创建日期</td>
								<td>上次更新</td>
								<td>操作</td>
							</tr>
						</thead>
<!-- 						书籍列表表格tbody -->
						<tbody id="book_list_table_tbody">
							<tr th:each="book,bookStat:${session.user.bookList}">
								<td th:text="${book.bookName}">书名</td>
								<td th:text="${book.type}">小说类型</td>
								<td th:text="${book.tags}">小说标签</td>
								<td th:text="${book.intro}">简介</td>
								<td th:text="${#dates.format(book.updated, 'yyyy-MM-dd HH:mm:ss')}">创建日期</td>
								<td th:text="${#dates.format(book.created, 'yyyy-MM-dd HH:mm:ss')}">上次更新</td>
								<td>
									<button class="btn btn-primary smFont" th:onclick="'javascript:viewChapterList(\''+${book.id}+'\');'">查看章节</button>
									&nbsp;<button class="btn btn-primary smFont" th:onclick="'javascript:deleteBook(\''+${book.id}+'\',this);'">删除本书</button>
									&nbsp;<button class="btn btn-primary smFont" th:onclick="'javascript:openUpdateBookFrom(\''+${book.id}+'\');'">修改信息</button>
								</td>
							</tr>
						</tbody>
						</table>
					</div>
				</div>
			</div>
			
<!-- --------------------------------人物关系图--------------------------------------------- -->
			<div id="people_relationship_div" class="tab-item row">人物关系图</div>

<!-- --------------------------------我的资料--------------------------------------------- -->
			<div id="my_info_div" class="tab-item" th:object="${session.user}">
			<table>
				<tr><td>id:</td><td><span th:text="*{id}"></span></td></tr>
				<tr><td>用户名:</td><td><span th:text="*{userName}"></span></td></tr>
				<tr><td>密码：</td><td><span th:text="*{password}"></span></td></tr>
				<tr><td>姓名：</td><td><span th:text="*{name}"></span></td></tr>
				<tr><td>性别：</td><td><span th:text="*{sex}"></span></td></tr>
				<tr><td>生日：</td><td><span th:text="*{#dates.format(birthday, 'yyyy-MM-dd')}"></span></td></tr>
				<tr><td>注册日期：</td><td><span th:text="*{#dates.format(created, 'yyyy-MM-dd HH:mm:ss')}"></span></td></tr>
<!-- 				<tr><td>名下书籍：</td><td><span th:text="*{bookList}"></span></td></tr> -->
			</table>
			</div>
		
<!-- --------------------------------章节列表--------------------------------------------- -->
			<div id="chapter_list_div">
			章节列表
			<table class="table table-striped table-bordered mytable">
			<thead>
				<tr>
					<td>章节标题</td>
					<td>字数</td>
					<td>创建日期</td>
					<td>上次更新</td>
					<td>操作</td>
				</tr>
			</thead>
			<tbody id="chapter_list_tbody">
<!-- 				<tr th:each="chapter,chapterStat:${session.user.getBookById(session.BookId).chapterList}"> -->
<!-- 					<td th:text="${chapter.title}">章节标题</td> -->
<!-- 					<td th:text="${chapter.words}">字数</td> -->
<!-- 					<td th:text="${#dates.format(chapter.updated, 'yyyy-MM-dd HH:mm:ss')}">创建日期</td> -->
<!-- 					<td th:text="${#dates.format(chapter.created, 'yyyy-MM-dd HH:mm:ss')}">上次更新</td> -->
<!-- 					<td> -->
<!-- 						<button class="btn btn-primary" th:onclick="'javascript:viewUpdateContent(\''+${book.id}+'\');'">查看/修改内容</button> -->
<!-- 					</td> -->
<!-- 				</tr> -->
			</tbody>
			</table>
			</div>

<!-- --------------------------------章节编辑--------------------------------------------- -->
<div id="content_edit_div">
	<input id="content_id_hidden" type="hidden" />
	<p id="chapter_title_p">章节标题</p>
    <div id="content_editor" class="bg0">
        <p>欢迎使用 <b>wangEditor</b> 富文本编辑器</p>
    </div>

</div>

<!-- ---------------------------------------------------------------------------------- -->


		</div>
	</div>
	<!-- 按钮：用于打开模态框 -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#select_file_div">
  打开模态框
</button>

	<!-- 模态框 -->
	<div class="modal fade" id="select_file_div">
		<div class="modal-dialog">
			<div class="modal-content">
				<!-- 模态框头部 -->
				<div class="modal-header">
					<h4 class="modal-title">选择文件</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
				<!-- 模态框主体 -->
				<div class="modal-body">
					<form id="book_upload_form" name="book_upload_form"
						enctype="multipart/form-data" method="post">
						<div class="custom-file mb-3">
					      <input type="file" class="custom-file-input" name="book_upload_file" id="book_upload_file"
							accept=".txt,.word" onchange="checkUploadType(this)" >
					      <label class="custom-file-label" for="book_upload_file">选择文件</label>
					    </div>
					</form>
				</div>

				<!-- 模态框底部 -->
				<div class="modal-footer">
					<button type="button" id="book_upload_btn" class="btn btn-primary"
						onclick="bookUpload()">提交</button>
					<button type="button" class="btn btn-secondary"
						data-dismiss="modal">关闭</button>
				</div>

			</div>
		</div>
	</div>
</body>
</html>